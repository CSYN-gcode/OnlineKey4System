{{-- PAPER --}}

<table class="table table-striped">
    <thead>
        <?php
        $currentfy_plus1 = $currentfy + 1;
        $selected = $selected_month;
        $overall_gg = array('=AG56','=AH56','=AI56','=AJ56','=AK56','=AL56','=AM56','=AN56','=AO56','=AP56','=AQ56','=AR56');
        ?>
        <!--  ROW -->
        <tr>
            {{-- <td>{{ $overall_gg[0] }}</td> --}}
            <td>{{ $overall_gg[$selected_month] }}</td>
            {{-- <td>{{ $selected_month }}</td> --}}
            <td></td>
            <td> Action Plan </td>
            <td></td>
            <td> Division/ Section: </td>
            <td></td>
            <td></td>
            <td></td>
            <td> PRICON MICROELECTRONICS INC. </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td> Ref. No.: </td>
            <td> 1 </td>
            <td></td>
            <td> Approved (sign) </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td> Key 4  </td>
            <td> Theme  </td>
            <td></td>
            <td></td>
            <td> Responsible Person </td>
            <td></td>
            <td></td>
            <td></td>
            <td> Team Members </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td> Preparation: </td>
            <td> 09-Sep-2022  </td>
            <td></td>
            <td> ESM  </td>
            <td>   </td>
            <td>   </td>
        </tr>
        <tr>
            <td></td>
            <td> Resources Optimum Utilization</td>
            <td></td>
            <td></td>
            <td> Mary Ann Garcia</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td> Approval: </td>
            <td> Mary Ann Garcia  </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
        </tr>
        <tr>
            <td>  Aiming for Improvement </td>
            <td>  Slogan </td>
            <td>  </td>
            <td>  </td>
            <td>  Area </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  Objective </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  OPERATIONS / SUPPORT  GROUP</td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
        </tr>
        <tr>
            <td></td>
            <td> "Reduce Inventory and be financially healthy" </td>
            <td>  </td>
            <td>  </td>
            <td> Support Group </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>1. Energy Consumption (KwH per $1k sales) <br>     
                2. Water consumption (Cu.M) / headcount Factory 1 and Factory 2 (7.5% reduction) <br>                                                         
                3. Reduction of paper consumption by 15~20% <br>
                4. Improvement of Inventory Variance by 3% <br>
                5. Co. Wide Sales Turn Over Rate (Target Improvement to 10) / For Monitoring only<br> 
                    Formula: =  Total Sales (12 Mo's Total) Average of 12 Mo's Inventory	                             
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
                <td></td>
                <td> FROM</td>
                <td></td>
                <td> TO</td>
                <td></td>
                <td></td>
        </tr>
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td>ENERGY</td>
                <td>111.80 Kwh / $1k sales</td>
                <td></td>
                <td>93.02 Kwh / $1k sales</td>
                <td></td>
                <td></td>
        </tr>
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td>WATER</td>
                <td>1.89 c/u meter per headcounts</td>
                <td></td>
                <td>1.75 c/u meter per headcounts</td>
                <td></td>
                <td></td>
        </tr>
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td>PAPER</td>
                <td>158.87reams</td>
                <td></td>
                <td>124.30reams</td>
                <td></td>
                <td></td>
        </tr>
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td>INVENTORY
                    VARIANCE ACTUAL vs.
                    YPICS
                </td>
                <td>0.36%</td>
                <td></td>
                <td>0.35%</td>
                <td></td>
                <td></td>
        </tr>
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td>Annual Co. Wide Sales TOP(Monitoring only)</td>
                <td>9.61</td>
                <td></td>
                <td>10.00</td>
                <td></td>
                <td></td>
        </tr>  
        <tr>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
        </tr>

        <tr>
            <td>No.</td>
            <td>Action</td>
            <td></td>
            <td></td>
            <td>Person</td>
            <td>{{ 'Apr-'.$currentfy}}</td>
            <td>{{ 'May-'.$currentfy}}</td>
            <td>{{ 'Jun-'.$currentfy}}</td>
            <td>{{ 'Jul-'.$currentfy}}</td>
            <td>{{ 'Aug-'.$currentfy}}</td>
            <td>{{ 'Sep-'.$currentfy}}</td>
            <td>{{ 'Oct-'.$currentfy}}</td>
            <td>{{ 'Nov-'.$currentfy}}</td>
            <td>{{ 'Dec-'.$currentfy}}</td>
            <td>{{ 'Jan-'.$currentfy_plus1}}</td>
            <td>{{ 'Feb-'.$currentfy_plus1}}</td>
            <td>{{ 'Mar-'.$currentfy_plus1}}</td>
            <td>Follow-up by Responsible Person</td>
            <td></td>
            <td></td>
            <td>Comments from Manager</td>
            <td></td>
            <td></td>
        </tr>

        {{-- looping --}}
        @php
            $counter = 1;
        @endphp
        @for ($i = 0; $i < 13; $i++)
            @if ($counter <= count($action_plan))
                <tr>
                    <td>{{ $counter }}</td>
                    <td>{{ $action_plan[$i]->action }}</td>
                    <td></td>
                    <td></td>
                    <td>{{ $action_plan[$i]->person }}</td>
                    {{-- @foreach($action_plan[$i] as $AP) --}}
                        @if ($action_plan[$i]->month == 4)
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 5)
                            <td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 6)
                            <td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 7)
                            <td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 8)
                            <td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 9)
                            <td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 10)
                            <td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 11)
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 12)
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 1)
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td><td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 2)
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td></td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @elseif($action_plan[$i]->month == 3)
                            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                            <td>{{-- {{ $action_plan[$i]->month }} --}}</td>
                            <td>{{ $action_plan[$i]->remarks }}</td>
                        @endif
                    {{-- @endforeach --}}
                </tr>
            @else
                <tr></tr>
            @endif
                @php
                    $counter++;
                @endphp
        @endfor
        {{-- looping --}}

    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}
                    <td>  PAPER  CONSUMPTION  </td>
    </tr>

    <tr>     
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

                    <td></td>
                    <td></td>
                    <td></td> {{-- reduction --}}
                    <th>{{ 'Mar-'.$pastfy}}</th>
                    <td>{{ 'Apr-'.$currentfy}}</td>
                    <td>{{ 'May-'.$currentfy}}</td>
                    <td>{{ 'Jun-'.$currentfy}}</td>
                    <td>{{ 'Jul-'.$currentfy}}</td>
                    <td>{{ 'Aug-'.$currentfy}}</td>
                    <td>{{ 'Sep-'.$currentfy}}</td>
                    <td>{{ 'Oct-'.$currentfy}}</td>
                    <td>{{ 'Nov-'.$currentfy}}</td>
                    <td>{{ 'Dec-'.$currentfy}}</td>
                    <td>{{ 'Jan-'.$currentfy_plus1}}</td>
                    <td>{{ 'Feb-'.$currentfy_plus1}}</td>
                    <td>{{ 'Mar-'.$currentfy_plus1}}</td>
    </tr>
            
        <!-- END  ROW -->

    <!-- PAST FY DATA -->
    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}
        <td></td>
        <td>{{ ($paper_pastfyactual - $paper_pastfyactual)/12 }}</td>{{-- reduction --}}
        <td></td>
        @php
            $paper_pastfyactual_round = round($paper_pastfyactual, 2);
            for ($i= 0; $i <= 12; $i++) { 
                echo '<td>'.$paper_pastfyactual_round.'</td>';
            }
        @endphp
    </tr>
        <!-- END  ROW -->        
        
    </thead>
    <tbody>
        <!-- ENERGY paper_target ROW -->
        
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $fy_diff = ($paper_pastfyactual - $paper_target) * 0.5;
                // $fy_diff_a = ($paper_pastfyactual - $fy_diff)
                $pastfy_reduction = $paper_pastfyactual - $fy_diff;
                $pastfy_reduction_round = round($pastfy_reduction, 1);
                $reduction = ($pastfy_reduction - $paper_pastfyactual)/12;
                $reduction_round = round($reduction, 4);

                        $data = array();
                        $a = $reduction;
                        $b = $paper_pastfyactual;
                        $c = $b + $a;
                        // $c_round = round($c, 2);
                        array_push($data, $c);
            @endphp

            <td></td>
            <td>{{ $reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $paper_pastfyactual_round }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $next[$i] = $data[$i] + $a;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($data, $next[$i]);
                    $data_round[$i] = round($data[$i], 1);
                @endphp
                <td>{{ $data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $pastfy_reduction_round }}</td>
            
                
        </tr> 
        <!-- END ENERGY paper_target ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
            
            @php
                $a_fy_diff = ($paper_pastfyactual - $paper_target) * 0.8;
                // $fy_diff_a = ($paper_pastfyactual - $fy_diff)
                $a_pastfy_reduction = $paper_pastfyactual - $a_fy_diff;
                $a_pastfy_reduction_round = round($a_pastfy_reduction, 1);
                $a_reduction = ($a_pastfy_reduction - $paper_pastfyactual)/12;
                $a_reduction_round = round($a_reduction, 4);

                        $a_data = array();
                        $a_1 = $a_reduction;
                        $b_1 = $paper_pastfyactual;
                        $c_1 = $b_1 + $a_1;
                        // $c_round = round($c, 2);
                        array_push($a_data, $c_1);
            @endphp

            <td></td>
            <td>{{ $a_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $paper_pastfyactual_round }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $a_next[$i] = $a_data[$i] + $a_1;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($a_data, $a_next[$i]);
                    $a_data_round[$i] = round($a_data[$i], 1);
                @endphp
                <td>{{ $a_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $a_pastfy_reduction_round }}</td>

        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $b_reduction = ($paper_target - $paper_pastfyactual)/12;
                $b_reduction_round = round($b_reduction, 4);
                // $fy_diff_a = ($paper_pastfyactual - $fy_diff)
                // $a_pastfy_reduction = $paper_pastfyactual - $a_fy_diff;
                $paper_target_round = round($paper_target, 1);
                // $a_reduction = ($a_pastfy_reduction - $paper_pastfyactual)/12;
                // $a_reduction_round = round($a_reduction, 4);

                        $b_data = array();
                        $a_2 = $b_reduction;
                        $b_2 = $paper_pastfyactual;
                        $c_2 = $b_2 + $a_2;
                        // $c_round = round($c, 2);
                        array_push($b_data, $c_2);
            @endphp
                
            <td></td>
            <td>{{ $b_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $paper_pastfyactual_round }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $b_next[$i] = $b_data[$i] + $a_2;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($b_data, $b_next[$i]);
                    $b_data_round[$i] = round($b_data[$i], 1);
                @endphp
                <td>{{ $b_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $paper_target_round }}</td>

        
        </tr> 
        <!-- END PAPER ACTUAL ROW -->
            @php
            $sg_paper_target = array();
            $sg_paper_actual = array();
            //  paper_target_months(array) dep_id=sg(3) is from "24-35"
            for ($i= 0; $i < 12; $i++) { 
                array_push($sg_paper_target , $paper_target_months[$i]);
                array_push($sg_paper_actual , $paper_actual_months[$i]);
            }
            $a_paper_target = $paper_target;//$a
            $array_sg_paper_target = array();//$bb
            $array_sg_paper_actual = array();//$bb
            // $tricolor_last = array();
            // $count = array(0,1,2,3,4,5,6,7,8,9,10,11);//$bb
            // $e = array();
            $tricolor_last = ($a_paper_target - array_sum($sg_paper_target)) + array_sum($sg_paper_actual);
            $c_reduction = ($tricolor_last - $paper_pastfyactual)/12;
            $c_reduction_round = round($b_reduction, 4);
            @endphp 
        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td>{{ $c_reduction_round }}</td>
            <td>Actual Performance</td>
            <td>{{ $paper_pastfyactual_round }}</td>
            {{-- 12 columns --}}
            {{-- @for ($i = 3; $i < 12; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor
            @for ($i = 0; $i <= 2; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor --}}
            @php
            $tricolor_array = array();//FOR TRICOLOR PERCENTAGE

                for($i= 3; $i <= 11; $i++){
                array_push($array_sg_paper_target, $sg_paper_target[$i]);
                array_push($array_sg_paper_actual, $sg_paper_actual[$i]);
                $d = ($a_paper_target - array_sum($array_sg_paper_target)) + array_sum($array_sg_paper_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_paper_target, $sg_paper_target[$i]);
                array_push($array_sg_paper_actual, $sg_paper_actual[$i]);
                $d = ($a_paper_target - array_sum($array_sg_paper_target)) + array_sum($array_sg_paper_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            @endphp
        
        </tr> 
        <!-- END PAPER ACTUAL ROW -->

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

        <td></td> 
        <td></td>
            <td>Computed Tri-color Rate</td>
            @php
            $paper_pastfy_tricolor_data = array();
                $pastfy_tricolor_ab = $data[0] - $paper_pastfyactual;
                        if ($pastfy_tricolor_ab == 0) {
                            $pastfy_tricolor_percentage = 0;
                            $pastfy_tricolor_percentage_round = 0;
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($paper_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }
                        else {
                            $pastfy_tricolor = ($data[0] - $paper_pastfyactual)/$pastfy_tricolor_ab;
                            $pastfy_tricolor_percentage = $pastfy_tricolor * 100;
                            $pastfy_tricolor_percentage_round = round($pastfy_tricolor_percentage, 0);
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($paper_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }

            $paper_tricolor_data = array();
                $tricolor_a = $data[0]; //static
                for ($i=0; $i <= 11; $i++) { 
                    $tricolor_b = $b_data[$i]; //with interation
                    // $tricolor_c = ($a_paper_target - $sg_paper_target[$i]) + $sg_paper_actual[$i]; //with interation
                    // array_push($tricolor_array_sg_paper_target, $sg_paper_target[$i]);
                    // array_push($tricolor_array_sg_actual, $sg_paper_actual[$i]);
                    $tricolor_c = $tricolor_array[$i];
                    $tricolor_ab = $tricolor_a - $tricolor_b;
                    if ($tricolor_ab == 0) {
                        $tricolor_percentage = 0;
                        echo '<td>'.$tricolor_percentage.'%'.'</td>';
                        array_push($paper_tricolor_data, $tricolor_percentage);
                    }
                    else {
                        $tricolor_d = ($tricolor_a - $tricolor_c)/$tricolor_ab; //with interation
                        $tricolor_percentage = $tricolor_d * 100;
                        $tricolor_percentage_round = round($tricolor_percentage, 0);
                        echo '<td>'.$tricolor_percentage_round.'%'.'</td>';
                        array_push($paper_tricolor_data, $tricolor_percentage);
                    }
                    
                }
            @endphp
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

        <td></td>  
        <td></td>
            <td>Conditional Tri-color Rate</td>      
            @php
                    if ($paper_pastfy_tricolor_data >= 100) {
                            $paper_pastfy_tricolor_data_round = 100;
                            echo '<td>'.$paper_pastfy_tricolor_data_round.'%</td>';
                        }
                    elseif($paper_pastfy_tricolor_data <= 0) {
                            $paper_pastfy_tricolor_data_round = 0;
                            echo '<td>'.$paper_pastfy_tricolor_data_round.'%</td>';
                        }
                    else{
                            $paper_pastfy_tricolor_data_round = round($paper_pastfy_tricolor_data, 0);
                            echo '<td>'.$paper_pastfy_tricolor_data_round.'%'.'</td>';
                        }

                for($i=0; $i <= 11; $i++){
                    
                        if ($paper_tricolor_data[$i] >= 100) {
                            $paper_tricolor_data_round = 100;
                            echo '<td>'.$paper_tricolor_data_round.'%</td>';
                        }
                        elseif ($paper_tricolor_data[$i] <= 0) {
                                $paper_tricolor_data_round = 0;
                                echo '<td>'.$paper_tricolor_data_round.'%</td>';
                            }
                        else{
                            $paper_tricolor_data_round = round($paper_tricolor_data[$i], 0);
                            echo '<td>'.$paper_tricolor_data_round.'%'.'</td>';
                        }
                                   
                }
            @endphp            
        </tr>

    </tbody>
</table>

{{-- ENERGY --}}
<table class="table table-striped">
    <thead>
        <!--  ROW -->
    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

                    <th> ENERGY CONSUMPTION KWH/MO'S (based in KwH per $1K Sales) </th>
    </tr>

    <tr>            
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

                    <th></th>
                    <th></th>
                    <th></th> {{-- reduction --}}
                    <th>{{ 'Mar-'.$pastfy}}</th>
                    <th>{{ 'Apr-'.$currentfy}}</th>
                    <th>{{ 'May-'.$currentfy}}</th>
                    <th>{{ 'Jun-'.$currentfy}}</th>
                    <th>{{ 'Jul-'.$currentfy}}</th>
                    <th>{{ 'Aug-'.$currentfy}}</th>
                    <th>{{ 'Sep-'.$currentfy}}</th>
                    <th>{{ 'Oct-'.$currentfy}}</th>
                    <th>{{ 'Nov-'.$currentfy}}</th>
                    <th>{{ 'Dec-'.$currentfy}}</th>
                    <th>{{ 'Jan-'.$currentfy_plus1}}</th>
                    <th>{{ 'Feb-'.$currentfy_plus1}}</th>
                    <th>{{ 'Mar-'.$currentfy_plus1}}</th>
    </tr>
            
        <!-- END  ROW -->

    <!-- PAST FY DATA -->
    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

        <td></td>
        <td>{{ ($energy_pastfyactual - $energy_pastfyactual)/12 }}</td>{{-- reduction --}}
        <td></td>
        @php
            $energy_pastfyactual_round = round($energy_pastfyactual, 1);
            for ($i= 0; $i <= 12; $i++) { 
                echo '<td>'.$energy_pastfyactual.'</td>';
            }
        @endphp
    </tr>
        <!-- END  ROW -->        
        
    </thead>
    <tbody>
        <!-- ENERGY energy_target ROW -->
        
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $fy_diff = ($energy_pastfyactual - $energy_target) * 0.5;
                // $fy_diff_a = ($energy_pastfyactual - $fy_diff)
                $pastfy_reduction = $energy_pastfyactual - $fy_diff;
                $pastfy_reduction_round = round($pastfy_reduction, 1);
                $reduction = ($pastfy_reduction - $energy_pastfyactual)/12;
                $reduction_round = round($reduction, 4);

                        $data = array();
                        $a = $reduction;
                        $b = $energy_pastfyactual;
                        $c = $b + $a;
                        // $c_round = round($c, 2);
                        array_push($data, $c);
            @endphp

            <td></td>
            <td>{{ $reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $energy_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $next[$i] = $data[$i] + $a;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($data, $next[$i]);
                    $data_round[$i] = round($data[$i], 1);
                @endphp
                <td>{{ $data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $pastfy_reduction_round }}</td>
            
                
        </tr> 
        <!-- END ENERGY energy_target ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $a_fy_diff = ($energy_pastfyactual - $energy_target) * 0.8;
                // $fy_diff_a = ($energy_pastfyactual - $fy_diff)
                $a_pastfy_reduction = $energy_pastfyactual - $a_fy_diff;
                $a_pastfy_reduction_round = round($a_pastfy_reduction, 1);
                $a_reduction = ($a_pastfy_reduction - $energy_pastfyactual)/12;
                $a_reduction_round = round($a_reduction, 4);

                        $a_data = array();
                        $a_1 = $a_reduction;
                        $b_1 = $energy_pastfyactual;
                        $c_1 = $b_1 + $a_1;
                        // $c_round = round($c, 2);
                        array_push($a_data, $c_1);
            @endphp

            <td></td>
            <td>{{ $a_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $energy_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $a_next[$i] = $a_data[$i] + $a_1;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($a_data, $a_next[$i]);
                    $a_data_round[$i] = round($a_data[$i], 1);
                @endphp
                <td>{{ $a_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $a_pastfy_reduction_round }}</td>

        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $b_reduction = ($energy_target - $energy_pastfyactual)/12;
                $b_reduction_round = round($b_reduction, 4);
                // $fy_diff_a = ($energy_pastfyactual - $fy_diff)
                // $a_pastfy_reduction = $energy_pastfyactual - $a_fy_diff;
                $energy_target_round = round($energy_target, 1);
                // $a_reduction = ($a_pastfy_reduction - $energy_pastfyactual)/12;
                // $a_reduction_round = round($a_reduction, 4);

                        $b_data = array();
                        $a_2 = $b_reduction;
                        $b_2 = $energy_pastfyactual;
                        $c_2 = $b_2 + $a_2;
                        // $c_round = round($c, 2);
                        array_push($b_data, $c_2);
            @endphp
                
            <td></td>
            <td>{{ $b_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $energy_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $b_next[$i] = $b_data[$i] + $a_2;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($b_data, $b_next[$i]);
                    $b_data_round[$i] = round($b_data[$i], 1);
                @endphp
                <td>{{ $b_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $energy_target_round }}</td>

        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->
            @php
            $sg_energy_target = array();
            $sg_energy_actual = array();
            //  energy_target_months(array) dep_id=sg(3) is from "24-35"
            for ($i=1; $i <= 12; $i++) { 
                array_push($sg_energy_target , $energy_target_months[$i]);
                array_push($sg_energy_actual , $energy_actual_months[$i]);
            }
            $a_energy_target = $energy_target;//$a
            $array_sg_energy_target = array();//$bb
            $array_sg_energy_actual = array();//$bb
            // $tricolor_last = array();
            // $count = array(0,1,2,3,4,5,6,7,8,9,10,11);//$bb
            // $e = array();
            $tricolor_last = ($a_energy_target - array_sum($sg_energy_target)) + array_sum($sg_energy_actual);
            $c_reduction = ($tricolor_last - $energy_pastfyactual)/12;
            $c_reduction_round = round($b_reduction, 4);
            @endphp 
        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
            
            <td></td>
            <td>{{ $c_reduction_round }}</td>
            <td>Actual Performance</td>
            <td>{{ $energy_pastfyactual }}</td>
            {{-- 12 columns --}}
            {{-- @for ($i = 3; $i < 12; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor
            @for ($i = 0; $i <= 2; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor --}}
            @php
            $tricolor_array = array();//FOR TRICOLOR PERCENTAGE

                for($i= 3; $i <= 11; $i++){
                array_push($array_sg_energy_target, $sg_energy_target[$i]);
                array_push($array_sg_energy_actual, $sg_energy_actual[$i]);
                $d = ($a_energy_target - array_sum($array_sg_energy_target)) + array_sum($array_sg_energy_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_energy_target, $sg_energy_target[$i]);
                array_push($array_sg_energy_actual, $sg_energy_actual[$i]);
                $d = ($a_energy_target - array_sum($array_sg_energy_target)) + array_sum($array_sg_energy_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            @endphp
        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
        <td></td> 
        <td></td>
            <td>Computed Tri-color Rate</td>
            @php
            $energy_pastfy_tricolor_data = array();
                $pastfy_tricolor_ab = $data[0] - $energy_pastfyactual;
                        if ($pastfy_tricolor_ab == 0) {
                            $pastfy_tricolor_percentage = 0;
                            $pastfy_tricolor_percentage_round = 0;
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($energy_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }
                        else {
                            $pastfy_tricolor = ($data[0] - $energy_pastfyactual)/$pastfy_tricolor_ab;
                            $pastfy_tricolor_percentage = $pastfy_tricolor * 100;
                            $pastfy_tricolor_percentage_round = round($pastfy_tricolor_percentage, 0);
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($energy_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }

            $energy_tricolor_data = array();
                $tricolor_a = $data[0]; //static
                for ($i=0; $i <= 11; $i++) { 
                    $tricolor_b = $b_data[$i]; //with interation
                    // $tricolor_c = ($a_energy_target - $sg_energy_target[$i]) + $sg_energy_actual[$i]; //with interation
                    // array_push($tricolor_array_sg_energy_target, $sg_energy_target[$i]);
                    // array_push($tricolor_array_sg_actual, $sg_energy_actual[$i]);
                    $tricolor_c = $tricolor_array[$i];
                    $tricolor_ab = $tricolor_a - $tricolor_b;
                    if ($tricolor_ab == 0) {
                        $tricolor_percentage = 0;
                        echo '<td>'.$tricolor_percentage.'%'.'</td>';
                        array_push($energy_tricolor_data, $tricolor_percentage);
                    }
                    else {
                        $tricolor_d = ($tricolor_a - $tricolor_c)/$tricolor_ab; //with interation
                        $tricolor_percentage = $tricolor_d * 100;
                        $tricolor_percentage_round = round($tricolor_percentage, 0);
                        echo '<td>'.$tricolor_percentage_round.'%'.'</td>';
                        array_push($energy_tricolor_data, $tricolor_percentage);
                    }
                    
                }
            @endphp
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
        <td></td>  
        <td></td>
            <td>Conditional Tri-color Rate</td>    
            @php
                    if ($energy_pastfy_tricolor_data >= 100) {
                            $energy_pastfy_tricolor_percentage_round = 100;
                            echo '<td>'.$energy_pastfy_tricolor_percentage_round.'%'.'</td>';
                        }
                    elseif ($energy_pastfy_tricolor_data <= 0) {
                            $energy_pastfy_tricolor_percentage_round = 0;
                            echo '<td>'.$energy_pastfy_tricolor_percentage_round.'%'.'</td>';
                        }
                    else{
                            $pastfy_tricolor_percentage_round = round($energy_pastfy_tricolor_data, 0);
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                        }

                for($i=0; $i <= 11; $i++){
                    
                        if ($energy_tricolor_data[$i] >= 100) {
                            $energy_tricolor_data_round = 100;
                            echo '<td>'.$energy_tricolor_data_round.'%'.'</td>';
                        }
                        elseif ($energy_tricolor_data[$i] <= 0) {
                                $energy_tricolor_data_round = 0;
                                echo '<td>'.$energy_tricolor_data_round.'%'.'</td>';
                            }
                        else{
                            $energy_tricolor_data_round = round($energy_tricolor_data[$i], 0);
                            echo '<td>'.$energy_tricolor_data_round.'%'.'</td>';
                        }
                                   
                }
            @endphp            
        </tr>

    </tbody>
</table>

{{-- WATER --}}

<table class="table table-striped">
    <thead>
        <!--  ROW -->
    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

                    <th>  WATER CONSUMPTION PER HEAD COUNT (CU.Meter)  </th>
    </tr>

    <tr>  
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}
                     
                    <th></th>
                    <th></th>
                    <th></th> {{-- reduction --}}
                    <th>{{ 'Mar-'.$pastfy}}</th>
                    <th>{{ 'Apr-'.$currentfy}}</th>
                    <th>{{ 'May-'.$currentfy}}</th>
                    <th>{{ 'Jun-'.$currentfy}}</th>
                    <th>{{ 'Jul-'.$currentfy}}</th>
                    <th>{{ 'Aug-'.$currentfy}}</th>
                    <th>{{ 'Sep-'.$currentfy}}</th>
                    <th>{{ 'Oct-'.$currentfy}}</th>
                    <th>{{ 'Nov-'.$currentfy}}</th>
                    <th>{{ 'Dec-'.$currentfy}}</th>
                    <th>{{ 'Jan-'.$currentfy_plus1}}</th>
                    <th>{{ 'Feb-'.$currentfy_plus1}}</th>
                    <th>{{ 'Mar-'.$currentfy_plus1}}</th>
    </tr>
            
        <!-- END  ROW -->

    <!-- PAST FY DATA -->
    <tr>
        {{-- 28 COLUMN TO THE RIGHT --}}       
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
        {{-- 28 COLUMN TO THE RIGHT END --}}

        <td></td>
        <td>{{ ($water_pastfyactual - $water_pastfyactual)/12 }}</td>{{-- reduction --}}
        <td></td>
        @php
            $water_pastfyactual_round = round($water_pastfyactual, 1);
            for ($i= 0; $i <= 12; $i++) { 
                echo '<td>'.$water_pastfyactual.'</td>';
            }
        @endphp
    </tr>
        <!-- END  ROW -->        
        
    </thead>
    <tbody>
        <!-- ENERGY water_target ROW -->
        
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $fy_diff = ($water_pastfyactual - $water_target) * 0.5;
                // $fy_diff_a = ($water_pastfyactual - $fy_diff)
                $pastfy_reduction = $water_pastfyactual - $fy_diff;
                $pastfy_reduction_round = round($pastfy_reduction, 1);
                $reduction = ($pastfy_reduction - $water_pastfyactual)/12;
                $reduction_round = round($reduction, 4);

                        $data = array();
                        $a = $reduction;
                        $b = $water_pastfyactual;
                        $c = $b + $a;
                        // $c_round = round($c, 2);
                        array_push($data, $c);
            @endphp

            <td></td>
            <td>{{ $reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $water_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $next[$i] = $data[$i] + $a;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($data, $next[$i]);
                    $data_round[$i] = round($data[$i], 1);
                @endphp
                <td>{{ $data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $pastfy_reduction_round }}</td>
            
                
        </tr> 
        <!-- END ENERGY water_target ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $a_fy_diff = ($water_pastfyactual - $water_target) * 0.8;
                // $fy_diff_a = ($water_pastfyactual - $fy_diff)
                $a_pastfy_reduction = $water_pastfyactual - $a_fy_diff;
                $a_pastfy_reduction_round = round($a_pastfy_reduction, 1);
                $a_reduction = ($a_pastfy_reduction - $water_pastfyactual)/12;
                $a_reduction_round = round($a_reduction, 4);

                        $a_data = array();
                        $a_1 = $a_reduction;
                        $b_1 = $water_pastfyactual;
                        $c_1 = $b_1 + $a_1;
                        // $c_round = round($c, 2);
                        array_push($a_data, $c_1);
            @endphp

            <td></td>
            <td>{{ $a_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $water_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $a_next[$i] = $a_data[$i] + $a_1;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($a_data, $a_next[$i]);
                    $a_data_round[$i] = round($a_data[$i], 1);
                @endphp
                <td>{{ $a_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $a_pastfy_reduction_round }}</td>

        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->

        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            @php
                $b_reduction = ($water_target - $water_pastfyactual)/12;
                $b_reduction_round = round($b_reduction, 4);
                // $fy_diff_a = ($water_pastfyactual - $fy_diff)
                // $a_pastfy_reduction = $water_pastfyactual - $a_fy_diff;
                $water_target_round = round($water_target, 1);
                // $a_reduction = ($a_pastfy_reduction - $water_pastfyactual)/12;
                // $a_reduction_round = round($a_reduction, 4);

                        $b_data = array();
                        $a_2 = $b_reduction;
                        $b_2 = $water_pastfyactual;
                        $c_2 = $b_2 + $a_2;
                        // $c_round = round($c, 2);
                        array_push($b_data, $c_2);
            @endphp
                
            <td></td>
            <td>{{ $b_reduction_round }}</td>
            <td>Performance</td>
            <td>{{ $water_pastfyactual }}</td>
            {{-- 11 columns --}}
            @for ($i = 0; $i < 11; $i++)
                @php
                    $b_next[$i] = $b_data[$i] + $a_2;
                    // $next_round[$i] = round($next[$i], 2);
                    array_push($b_data, $b_next[$i]);
                    $b_data_round[$i] = round($b_data[$i], 1);
                @endphp
                <td>{{ $b_data_round[$i] }}</td>
            @endfor
            {{-- 1 column --}}
                <td>{{ $water_target_round }}</td>

        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->
            @php
            $sg_water_target = array();
            $sg_water_actual = array();
            //  water_target_months(array) dep_id=sg(3) is from "24-35"
            for ($i=1; $i <= 12; $i++) { 
                array_push($sg_water_target , $water_target_months[$i]);
                array_push($sg_water_actual , $water_actual_months[$i]);
            }
            $a_water_target = $water_target;//$a
            $array_sg_water_target = array();//$bb
            $array_sg_water_actual = array();//$bb
            // $tricolor_last = array();
            // $count = array(0,1,2,3,4,5,6,7,8,9,10,11);//$bb
            // $e = array();
            $tricolor_last = ($a_water_target - array_sum($sg_water_target)) + array_sum($sg_water_actual);
            $c_reduction = ($tricolor_last - $water_pastfyactual)/12;
            $c_reduction_round = round($b_reduction, 4);
            @endphp 
        <!-- ENERGY ACTUAL ROW -->
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
            
            <td></td>
            <td>{{ $c_reduction_round }}</td>
            <td>Actual Performance</td>
            <td>{{ $water_pastfyactual }}</td>
            {{-- 12 columns --}}
            {{-- @for ($i = 3; $i < 12; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor
            @for ($i = 0; $i <= 2; $i++)
                <td>{{ $array_tricolor[$i] }}</td>
            @endfor --}}
            @php
            $tricolor_array = array();//FOR TRICOLOR PERCENTAGE

                for($i= 3; $i <= 11; $i++){
                array_push($array_sg_water_target, $sg_water_target[$i]);
                array_push($array_sg_water_actual, $sg_water_actual[$i]);
                $d = ($a_water_target - array_sum($array_sg_water_target)) + array_sum($array_sg_water_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_water_target, $sg_water_target[$i]);
                array_push($array_sg_water_actual, $sg_water_actual[$i]);
                $d = ($a_water_target - array_sum($array_sg_water_target)) + array_sum($array_sg_water_actual);
                array_push($tricolor_array,$d);//for tricolor percentage
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
            }
            @endphp
        
        </tr> 
        <!-- END ENERGY ACTUAL ROW -->

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

        <td></td> 
        <td></td>
            <td>Computed Tri-color Rate</td>
            @php
                $water_pastfy_tricolor_data = array();
                    $pastfy_tricolor_ab = $data[0] - $water_pastfyactual;
                        if ($pastfy_tricolor_ab == 0) {
                            $pastfy_tricolor_percentage = 0;
                            $pastfy_tricolor_percentage_round = 0;
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($water_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }
                        else {
                            $pastfy_tricolor = ($data[0] - $water_pastfyactual)/$pastfy_tricolor_ab;
                            $pastfy_tricolor_percentage = $pastfy_tricolor * 100;
                            $pastfy_tricolor_percentage_round = round($pastfy_tricolor_percentage, 0);
                            echo '<td>'.$pastfy_tricolor_percentage_round.'%'.'</td>';
                            array_push($water_pastfy_tricolor_data, $pastfy_tricolor_percentage);
                        }

                $water_tricolor_data = array();
                $tricolor_a = $data[0]; //static
                for ($i=0; $i <= 11; $i++) { 
                    $tricolor_b = $b_data[$i]; //with interation
                    // $tricolor_c = ($a_water_target - $sg_water_target[$i]) + $sg_water_actual[$i]; //with interation
                    // array_push($tricolor_array_sg_water_target, $sg_water_target[$i]);
                    // array_push($tricolor_array_sg_actual, $sg_water_actual[$i]);
                    $tricolor_c = $tricolor_array[$i];
                    $tricolor_ab = $tricolor_a - $tricolor_b;
                    if ($tricolor_ab == 0) {
                        $tricolor_percentage = 0;
                        echo '<td>'.$tricolor_percentage.'%'.'</td>';
                        array_push($water_tricolor_data, $tricolor_percentage);
                    }
                    else {
                        $tricolor_d = ($tricolor_a - $tricolor_c)/$tricolor_ab; //with interation
                        $tricolor_percentage = $tricolor_d * 100;
                        $tricolor_percentage_round = round($tricolor_percentage, 0);
                        echo '<td>'.$tricolor_percentage_round.'%'.'</td>';
                        array_push($water_tricolor_data, $tricolor_percentage);
                    }
                    
                }
            @endphp
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
            
        <td></td>  
        <td></td>
            <td>Conditional Tri-color Rate</td>      
            @php
                    if ($water_pastfy_tricolor_data >= 100) {
                            $water_pastfy_tricolor_data_round = 100;
                            echo '<td>'.$water_pastfy_tricolor_data_round.'%'.'</td>';
                        }
                    elseif ($water_pastfy_tricolor_data <= 0) {
                            $water_pastfy_tricolor_data_round = 0;
                            echo '<td>'.$water_pastfy_tricolor_data_round.'%'.'</td>';
                        }
                    else{
                            $water_pastfy_tricolor_data_round = round($water_pastfy_tricolor_data, 0);
                            echo '<td>'.$water_pastfy_tricolor_data_round.'%'.'</td>';
                        }

                for($i=0; $i <= 11; $i++){
                    
                        if ($water_tricolor_data[$i] >= 100) {
                            $water_tricolor_data_round = 100;
                            echo '<td>'.$water_tricolor_data_round.'%</td>';
                        }
                        elseif ($water_tricolor_data[$i] <= 0) {
                                $water_tricolor_data_round = 0;
                                echo '<td>'.$water_tricolor_data_round.'%</td>';
                            }
                        else{
                            $water_tricolor_data_round = round($water_tricolor_data[$i], 0);
                            echo '<td>'.$water_tricolor_data_round.'%'.'</td>';
                        }          
                }
            @endphp            
        </tr>

        <tr>
            {{-- blank row --}}
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            
            <td>Over All Performance</td>
            <td></td>
            <td></td>
            @php
            $pastoverall = ($paper_pastfy_tricolor_data[0] + $energy_pastfy_tricolor_data[0] + $water_pastfy_tricolor_data[0]) / 3;
            echo '<td>'.$pastoverall.'%</td>';
            @endphp
            {{-- 12 COLUMNS --}}
            @php
                    $array_paper_tricolor_data = array();
                    $array_energy_tricolor_data = array();
                    $array_water_tricolor_data = array();

                    for($j=0; $j <= 11; $j++){
                                if ($paper_tricolor_data[$j] >= 100){
                                    $paper_tricolor_data[$j] = 100;
                                    array_push($array_paper_tricolor_data, $paper_tricolor_data[$j]);
                                }elseif($paper_tricolor_data[$j] <= 0){
                                    $paper_tricolor_data[$j] = 0;
                                    array_push($array_paper_tricolor_data, $paper_tricolor_data[$j]);
                                }
                                else{
                                    array_push($array_paper_tricolor_data, $paper_tricolor_data[$j]);
                                }
    
                                if ($energy_tricolor_data[$j] >= 100){
                                    $energy_tricolor_data[$j] = 100;
                                    array_push($array_energy_tricolor_data, $energy_tricolor_data[$j]);
                                }elseif($energy_tricolor_data[$j] <= 0){
                                    $energy_tricolor_data[$j] = 0;
                                    array_push($array_energy_tricolor_data, $energy_tricolor_data[$j]);
                                }else{
                                    array_push($array_energy_tricolor_data, $energy_tricolor_data[$j]);
                                }
                                
                                if ($water_tricolor_data[$j] >= 100){
                                    $water_tricolor_data[$j] = 100;
                                    array_push($array_water_tricolor_data, $water_tricolor_data[$j]);
                                }elseif($water_tricolor_data[$j] <= 0){
                                    $water_tricolor_data[$j] = 0;
                                    array_push($array_water_tricolor_data, $water_tricolor_data[$j]);
                                }else{
                                    array_push($array_water_tricolor_data, $water_tricolor_data[$j]);
                                }
                            }

                for($i=0; $i <= 11; $i++){

                    $overall_average = ($array_paper_tricolor_data[$i] + $array_energy_tricolor_data[$i] + $array_water_tricolor_data[$i]) / 3;
                    $overall_average_round = round($overall_average, 0);
                    // array_push($overall_gg, $overall_average[$i]);
                    echo '<td>'.$overall_average_round.'%</td>';
                }

                    // if ($paper_tricolor_data[$i] >= 100 && $energy_tricolor_data[$i] >= 100 && $water_tricolor_data[$i] >= 100) {
                    //     $paper_tricolor_data[$i] = 100;
                    //     $energy_tricolor_data[$i] = 100;
                    //     $water_tricolor_data[$i] = 100;
                        
                    //     $overall_average = ($paper_tricolor_data[$i] + $energy_tricolor_data[$i] + $water_tricolor_data[$i]) / 3;
                    //     $overall_average_round = round($overall_average, 0);
                    //     echo '<td>'.$overall_average_round.'%</td>';
                    // }
                    // elseif ($paper_tricolor_data[$i] >= 100 && $energy_tricolor_data[$i] >= 100) {
                    //     $paper_tricolor_data[$i] = 100;
                    //     $energy_tricolor_data[$i] = 100;

                    //     $overall_average = ($paper_tricolor_data[$i] + $energy_tricolor_data[$i] + $water_tricolor_data[$i]) / 3;
                    //     $overall_average_round = round($overall_average, 0);
                    //     echo '<td>'.$overall_average_round.'%</td>';
                    // }
                    // elseif ($paper_tricolor_data[$i] >= 100) {
                    //     $paper_tricolor_data[$i] = 100;

                    //     $overall_average = ($paper_tricolor_data[$i] + $energy_tricolor_data[$i] + $water_tricolor_data[$i]) / 3;
                    //     $overall_average_round = round($overall_average, 0);
                    //     echo '<td>'.$overall_average_round.'%</td>';
                    // }
                    // else {
                    //     $overall_average = ($paper_tricolor_data[$i] + $energy_tricolor_data[$i] + $water_tricolor_data[$i]) / 3;
                    //     $overall_average_round = round($overall_average, 0);
                    //     echo '<td>'.$overall_average_round.'%</td>';
                    // }      
                
            @endphp
            
        </tr>

    </tbody>
</table>

<table class="table table-striped">
    <thead>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>PAPER CONSUMPTION</th>           
            <th></th>
            <th></th>
            <th>{{ 'Mar-'.$pastfy}}</th>
            <th>{{ 'Apr-'.$currentfy}}</th>
            <th>{{ 'May-'.$currentfy}}</th>
            <th>{{ 'Jun-'.$currentfy}}</th>
            <th>{{ 'Jul-'.$currentfy}}</th>
            <th>{{ 'Aug-'.$currentfy}}</th>
            <th>{{ 'Sep-'.$currentfy}}</th>
            <th>{{ 'Oct-'.$currentfy}}</th>
            <th>{{ 'Nov-'.$currentfy}}</th>
            <th>{{ 'Dec-'.$currentfy}}</th>
            <th>{{ 'Jan-'.$currentfy_plus1}}</th>
            <th>{{ 'Feb-'.$currentfy_plus1}}</th>
            <th>{{ 'Mar-'.$currentfy_plus1}}</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td>
            <td>Target</td>
            @php
                $paper_pastfytarget_round = round($paper_pastfytarget ,2);
            @endphp
            <td>{{ $paper_pastfytarget_round }}</td>      
            @php
                $array_sg_paper_target_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_paper_target_round = round($sg_paper_target[$i], 2);
                array_push($array_sg_paper_target_round, $sg_paper_target_round);
                }

                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_paper_target_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_paper_target_round[$i].'</td>';
                } 
                $sg_paper_target_sum = array_sum($sg_paper_target);
                $sg_paper_target_sum_round = round($sg_paper_target_sum, 2);
                echo '<td>'.$sg_paper_target_sum_round.'</td>';
            @endphp
              
        </tr>
            
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td> 
            <td>Actual</td>
            <td>{{ $paper_pastfyactual_round }}</td>
            @php
                $array_sg_paper_actual_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_paper_actual_round = round($sg_paper_actual[$i], 2);
                array_push($array_sg_paper_actual_round, $sg_paper_actual_round);
                }
                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_paper_actual_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_paper_actual_round[$i].'</td>';
                } 
                $sg_paper_actual_sum = array_sum($sg_paper_actual);
                $sg_paper_actual_sum_round = round($sg_paper_actual_sum, 2);
                echo '<td>'.$sg_paper_actual_sum_round.'</td>';
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}
            
            <td></td>
            <td></td> 
            <td>-</td>
             <td></td>{{-- BLANK COLUMN --}}
            @php
                for($i= 3; $i <= 11; $i++){
                    $diff_paper_targetvsactual = $array_sg_paper_target_round[$i] - $array_sg_paper_actual_round[$i];
                    echo '<td>'.$diff_paper_targetvsactual.'</td>';
                }
            for($i= 0; $i <= 2; $i++){
                    $diff_paper_targetvsactual = $array_sg_paper_target_round[$i] - $array_sg_paper_actual_round[$i];
                    echo '<td>'.$diff_paper_targetvsactual.'</td>';
                } 
                    $diff_paper_target_and_actual = $sg_paper_target_sum - $sg_paper_actual_sum;
                    $diff_paper_target_and_actual_round = round($diff_paper_target_and_actual, 2);
                    echo '<td>'.$diff_paper_target_and_actual_round.'</td>';   
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>TRI COLOR CHART Data</th>   
            <td></td>
            <td></td>
            <td></td>   
            @php
            $array_sg_paper_target_1 = array();//$bb
            $array_sg_paper_actual_1 = array();//$bb

            for($i= 3; $i <= 11; $i++){
                array_push($array_sg_paper_target_1, $sg_paper_target[$i]);
                array_push($array_sg_paper_actual_1, $sg_paper_actual[$i]);
                $d = ($a_paper_target - array_sum($array_sg_paper_target_1)) + array_sum($array_sg_paper_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_paper_target_1, $sg_paper_target[$i]);
                array_push($array_sg_paper_actual_1, $sg_paper_actual[$i]);
                $d = ($a_paper_target - array_sum($array_sg_paper_target_1)) + array_sum($array_sg_paper_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }

                $tricolor_total = (0 - $sg_paper_target_sum) + $sg_paper_actual_sum;
                $tricolor_total_round = round($tricolor_total, 2);
                echo '<td>'.$tricolor_total_round.'</td>';
            @endphp    
        </tr>
    </tbody>
   
</table>

<table class="table table-striped">
    <thead>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>ENERGY CONSUMPTION Kwh/Mo's</th>           
            <th></th>
            <th></th>
            <th>{{ 'Mar-'.$pastfy}}</th>
            <th>{{ 'Apr-'.$currentfy}}</th>
            <th>{{ 'May-'.$currentfy}}</th>
            <th>{{ 'Jun-'.$currentfy}}</th>
            <th>{{ 'Jul-'.$currentfy}}</th>
            <th>{{ 'Aug-'.$currentfy}}</th>
            <th>{{ 'Sep-'.$currentfy}}</th>
            <th>{{ 'Oct-'.$currentfy}}</th>
            <th>{{ 'Nov-'.$currentfy}}</th>
            <th>{{ 'Dec-'.$currentfy}}</th>
            <th>{{ 'Jan-'.$currentfy_plus1}}</th>
            <th>{{ 'Feb-'.$currentfy_plus1}}</th>
            <th>{{ 'Mar-'.$currentfy_plus1}}</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td>
            <td>Target</td>
            @php
                $energy_pastfytarget_round = round($energy_pastfytarget ,2);
            @endphp      
            <td>{{ $energy_pastfytarget_round }}</td>
            @php
                $array_sg_energy_target_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_energy_target_round = round($sg_energy_target[$i], 2);
                array_push($array_sg_energy_target_round, $sg_energy_target_round);
                }

                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_energy_target_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_energy_target_round[$i].'</td>';
                } 
                $sg_energy_target_sum = array_sum($sg_energy_target);
                $sg_energy_target_sum_round = round($sg_energy_target_sum, 2);
                echo '<td>'.$sg_energy_target_sum_round.'</td>';
                
            @endphp
              
        </tr>
            
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td> 
            <td>Actual</td>
            <td>{{ $energy_pastfyactual_round }}</td>
            @php
                $array_sg_energy_actual_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_energy_actual_round = round($sg_energy_actual[$i], 2);
                array_push($array_sg_energy_actual_round, $sg_energy_actual_round);
                }

                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_energy_actual_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_energy_actual_round[$i].'</td>';
                } 
                $sg_energy_actual_sum = array_sum($sg_energy_actual);
                $sg_energy_actual_sum_round = round($sg_energy_actual_sum, 2);
                echo '<td>'.$sg_energy_actual_sum_round.'</td>';
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td> 
            <td>-</td>
             <td></td>{{-- BLANK COLUMN --}}
            @php
                for($i= 3; $i <= 11; $i++){
                    $diff_energy_targetvsactual = $array_sg_energy_target_round[$i] - $array_sg_energy_actual_round[$i];
                echo '<td>'.$diff_energy_targetvsactual.'</td>';
                }
            for($i= 0; $i <= 2; $i++){
                    $diff_energy_targetvsactual = $array_sg_energy_target_round[$i] - $array_sg_energy_actual_round[$i];
                echo '<td>'.$diff_energy_targetvsactual.'</td>';
                } 

                $diff_energy_target_and_actual = $sg_energy_target_sum - $sg_energy_actual_sum;
                $diff_energy_target_and_actual_round = round($diff_energy_target_and_actual, 2);
                echo '<td>'.$diff_energy_target_and_actual_round.'</td>';   
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>TRI COLOR CHART Data</th>   
            <td></td>
            <td></td>
            <td></td>   
            @php
            $array_sg_energy_target_1 = array();//$bb
            $array_sg_energy_actual_1 = array();//$bb

            for($i= 3; $i <= 11; $i++){
                array_push($array_sg_energy_target_1, $sg_energy_target[$i]);
                array_push($array_sg_energy_actual_1, $sg_energy_actual[$i]);
                $d = ($a_energy_target - array_sum($array_sg_energy_target_1)) + array_sum($array_sg_energy_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_energy_target_1, $sg_energy_target[$i]);
                array_push($array_sg_energy_actual_1, $sg_energy_actual[$i]);
                $d = ($a_energy_target - array_sum($array_sg_energy_target_1)) + array_sum($array_sg_energy_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }

                $tricolor_total = (0 - $sg_energy_target_sum) + $sg_energy_actual_sum;
                $tricolor_total_round = round($tricolor_total, 2);
                echo '<td>'.$tricolor_total_round.'</td>';
            @endphp    
        </tr>
    </tbody>
   
</table>

<table class="table table-striped">
    <thead>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>WATER CONSUMPTION</th>           
            <th></th>
            <th></th>
            <th>{{ 'Mar-'.$pastfy}}</th>
            <th>{{ 'Apr-'.$currentfy}}</th>
            <th>{{ 'May-'.$currentfy}}</th>
            <th>{{ 'Jun-'.$currentfy}}</th>
            <th>{{ 'Jul-'.$currentfy}}</th>
            <th>{{ 'Aug-'.$currentfy}}</th>
            <th>{{ 'Sep-'.$currentfy}}</th>
            <th>{{ 'Oct-'.$currentfy}}</th>
            <th>{{ 'Nov-'.$currentfy}}</th>
            <th>{{ 'Dec-'.$currentfy}}</th>
            <th>{{ 'Jan-'.$currentfy_plus1}}</th>
            <th>{{ 'Feb-'.$currentfy_plus1}}</th>
            <th>{{ 'Mar-'.$currentfy_plus1}}</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td>
            <td>Target</td>
            @php
                $water_pastfytarget_round = round($water_pastfytarget ,2);
            @endphp
            <td>{{ $water_pastfytarget_round }}</td>          
            @php
                $array_sg_water_target_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_water_target_round = round($sg_water_target[$i], 2);
                array_push($array_sg_water_target_round, $sg_water_target_round);
                }

                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_water_target_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_water_target_round[$i].'</td>';
                } 
                $sg_water_target_sum = array_sum($sg_water_target);
                $sg_water_target_sum_round = round($sg_water_target_sum, 2);
                echo '<td>'.$sg_water_target_sum_round.'</td>';
            @endphp
              
        </tr>
            
        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td> 
            <td>Actual</td>
            <td>{{ $water_pastfyactual_round }}</td>
            @php
                $array_sg_water_actual_round = array();
                for($i= 0; $i <= 11; $i++){
                $sg_water_actual_round = round($sg_water_actual[$i], 2);
                array_push($array_sg_water_actual_round, $sg_water_actual_round);
                }

                for($i= 3; $i <= 11; $i++){
                echo '<td>'.$array_sg_water_actual_round[$i].'</td>';
                }
                for($i= 0; $i <= 2; $i++){
                echo '<td>'.$array_sg_water_actual_round[$i].'</td>';
                } 
                $sg_water_actual_sum = array_sum($sg_water_actual);
                $sg_water_actual_sum_round = round($sg_water_actual_sum, 2);
                echo '<td>'.$sg_water_actual_sum_round.'</td>';
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <td></td>
            <td></td> 
            <td>-</td>
             <td></td>{{-- BLANK COLUMN --}}
            @php
                for($i= 3; $i < 12; $i++){
                    if ($sg_water_actual[$i] !== null && $sg_water_target[$i] !== null) {
                        $diff_water_targetvsactual = $array_sg_water_target_round[$i] - $array_sg_water_actual_round[$i];
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                    elseif ($sg_water_actual[$i] !== null) {
                        $diff_water_targetvsactual = $array_sg_water_target_round[$i] - 0;
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                    elseif ($sg_water_target[$i] !== null) {
                        $diff_water_targetvsactual = 0 - $array_sg_water_actual_round[$i];
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                        
                }
                for($i= 0; $i <= 2; $i++){
                    if ($sg_water_actual[$i] !== null && $sg_water_target[$i] !== null) {
                        $diff_water_targetvsactual = $array_sg_water_target_round[$i] - $array_sg_water_actual_round[$i];
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                    elseif ($sg_water_actual[$i] !== null) {
                        $diff_water_targetvsactual = $array_sg_water_target_round[$i] - 0;
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                    elseif ($sg_water_target[$i] !== null) {
                        $diff_water_targetvsactual = 0 - $array_sg_water_actual_round[$i];
                        echo '<td>'.$diff_water_targetvsactual.'</td>';
                    }
                } 

                $diff_water_target_and_actual = $sg_water_target_sum - $sg_water_actual_sum;
                $diff_water_target_and_actual_round = round($diff_water_target_and_actual, 2); 
                echo '<td>'.$diff_water_target_and_actual_round.'</td>';   
            @endphp
            
        </tr>

        <tr>
            {{-- 28 COLUMN TO THE RIGHT --}}       
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            {{-- 28 COLUMN TO THE RIGHT END --}}

            <th>TRI COLOR CHART Data</th>   
            <td></td>
            <td></td>
            <td></td>   
            @php
            $array_sg_water_target_1 = array();//$bb
            $array_sg_water_actual_1 = array();//$bb

            for($i= 3; $i <= 11; $i++){
                array_push($array_sg_water_target_1, $sg_water_target[$i]);
                array_push($array_sg_water_actual_1, $sg_water_actual[$i]);
                $d = ($a_water_target - array_sum($array_sg_water_target_1)) + array_sum($array_sg_water_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }
            for($i= 0; $i <= 2; $i++){
                array_push($array_sg_water_target_1, $sg_water_target[$i]);
                array_push($array_sg_water_actual_1, $sg_water_actual[$i]);
                $d = ($a_water_target - array_sum($array_sg_water_target_1)) + array_sum($array_sg_water_actual_1);
                $d_round = round($d, 2);
                echo '<td>'.$d_round.'</td>';
                }

                $tricolor_total = (0 - $sg_water_target_sum) + $sg_water_actual_sum;
                $tricolor_total_round = round($tricolor_total, 2);
                echo '<td>'.$tricolor_total_round.'</td>';
            @endphp    
        </tr>
    </tbody>
   
</table>




